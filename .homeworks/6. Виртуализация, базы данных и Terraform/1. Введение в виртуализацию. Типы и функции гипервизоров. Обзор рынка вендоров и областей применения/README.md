# Домашнее задание по теме: "Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения"

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

**Ответ:**  
1. Полная виртуализация - полная эмуляция оборудования для гостевой системы. В данном случае гипервизор работает непосредственно на оборудовании, он сам является операционной системой. Для полной виртуализации не требуется дополнительно ПО или модификация ядра системы.
2. Паравиртуализация - в данном случае гостевая система модифицируется, благодаря чему некоторые компоненты будут доступны напрямую из гостевой системы. Это позволяет уменьшить накладные расходы на эмуляцию оборудования. Гипервизору требуется ОС для доступа гоствых машин к аппаратным ресурсам.
3. Виртуализация уровня ОС - аппаратные ресурсы не эмулируются, вместо этого гостевой процесс изолируется такими технологиями как chroot. Использует ядро основной операционной системы, поэтому в данном режиме можно запускать контейнеры только того же семейства ОС.

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

**Ответ:**  
1. Высоконагруженная база данных, чувствительная к отказу - физические сервера с дисковым массивом в кластере. Нет затрат на виртуализацию и лишних программных уровней на котором могут быть проблемы.
2. Различные web-приложения - виртуализация уровня ОС, с учетом того что это statless сервисы можно использовать Docker, можно удобно строить/администрировать отказоустойчивую инфраструктуру, деплоить новые версии и т.д.  
3. Windows системы для использования бухгалтерским отделом - паравиртуализация, на одном сервере можно запустить несколько гостевых ОС, что снизит стоимость по сравнению с физическими серверами,  удобство миграции и распределения ресурсов.
4. Системы, выполняющие высокопроизводительные расчеты на GPU  - виртуализация уровня ОС. [nvidia/cuda](https://hub.docker.com/r/nvidia/cuda), накладных расходов на виртуализацию нет, а администрировать удобно.

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

**Ответ:**  
1. Решения от VMware (vSphere). При таком количестве виртуальных машин нужно выбирать стабильное проверенное решение (и в связи с этим дополнительных расходах). Но с учетом того, что продукт ушел с нашего рынка - KVM (можно подумать о OpenStack).
2. KVM (Ovirt/ProxMox). Довольно стабильное решение, постоянно развивается.
3. KVM. Hyper-V не бесплатный, исходим из того, что Windows Server у нас нет.
4. KVM (ProxMox). Если подразумевается какой-то тестовый контур (и выделенный сервер для него). OpenSource, удобно администрировать. Но в принципе в данном случае можно использовать облачных провайдеров и не тратиться на железный сервер. Если тестирование не постоянное - можно использовать прерываемые ВМ. Если же речь идет о тестировании непосредственно на рабочей станции - VirtualBox.

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

**Ответ:** использовать две разные системы с точки зрения администрирования - неудобно. Нет возможности объединить мощности и легко мигрировать в случае необходимости виртуальные машины. В случае мощностей (в хорошей ситуации) будут неиспользуемые, что значит неоправданные (в некоторых случаях может конечно и оправданные) траты на покупку аппаратных ресурсов.
